# 字符编码

标签（空格分隔）： 前端知识体系

---

## 字符编码模型

* 字符表：字符范围，如ASCII字符、Unicode字符
* 字符集：对字符表进行编号，如ASCII字符集、Unicode字符集
* 字符编码：将数字编号编码为二进制序列，如UTF-8、UTF-16
* 字节编码：将二进制序列映射为字节序列，如大端序、小端序
* 传输编码：对字节序列进行编码，如压缩、加密

## ASCII编码

英文编码

### 字符集

* 字母
* 数字
* 符号
* 控制字符

### 字符编码

用一个字节的后七位表示一个字符，共128个字符

## ANSI编码

各地区兼容ASCII又互不兼容的字符编码统称

### ISO/IEC 8859编码

欧洲语言编码

#### 字符集

ISO/IEC 8859-n, n=1、2、3...15、16（12未定义），共15个字符集

* ASCII字符
* 西欧、东欧等各自地区的字符

#### 字符编码

一个字节表示

* ASCII字符用ASCII码表示
* 其他字符用非ASCII码表示

### GBK编码

简体汉字编码

#### 字符集

* ASCII字符
* 外文字符
* 简体汉字

#### 字符编码

* ASCII字符用ASCII码表示
* 其他字符用两个字节表示，高位不为ASCII码

### Big5编码

繁体汉字编码

#### 字符集

* ASCII字符
* 繁体汉字

#### 字符编码

* ASCII字符用ASCII码表示
* 其他字符用两个字节表示，高位不为ASCII码

## Unicode编码

全球统一字符编码方案

### Unicode字符集

共为17个平面，每个平面2^16=65536个编号空间

* 1个基本平面：常用字符
* 16个辅助平面：特殊字符

### UTF-8

单字节码元编码

```
Unicode符号范围       | UTF-8编码方式
(十六进制)            | (二进制)
----------------------+---------------------------------------------
0000 0000 - 0000 007F | 0xxxxxxx
0000 0080 - 0000 07FF | 110xxxxx 10xxxxxx
0000 0800 - 0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx
0001 0000 - 0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
```

### UTF-16

双字节码元

* 基本平面字符用一个码元
* 辅助平面字符用两个码元，高位在U+D800到U+DBFF之间，低位在U+DC00到U+DFFF之间

```
// 将大于U+FFFF的字符，从Unicode转为UTF-16
H = Math.floor((C - 0x10000) / 0x400) + 0xD800
L = (C - 0x10000) % 0x400 + 0xDC00

// 将大于U+FFFF的字符，从UTF-16转为Unicode
C = (H - 0xD800) * 0x400 + L - 0xDC00 + 0x10000
```

### UTF-32

四字节码元

* 所有字符用一个码元表示

## 字节序

多字节的数据类型在计算机存储、读取时各字节的排列顺序

* 大端序：高位在前，如Mac
* 小端序：低位在前，如x86

### BOM

字符U+FEFF的别名，在字节流的开头时表示字节序

* UTF-16中，FE FF为大端序，FF FE为小端序
* UTF-32中，00 00 FE FF为大端序，FF FE 00 00为小端序
* UTF-8中，不需使用BOM，但Windows中使用EF BB BF（BOM的UTF-8表示）表明编码为UTF-8

## 传输编码

对传输的字节流进行转换、压缩、加密等操作

### Base64编码

使用64个可见字符对字节进行编码

#### 字符集

* 字母
* 数字
* 等号
* 斜杠

#### 编码

* 每三个字节划分为四组，前补两个0，扩展为四个字节
* 剩下两个字节划分为三组，6位前补两个0，4位前两0后两0，再加上等号扩展为四个字节
* 剩下一个字节划分为两组，6位前补两个0，2位前两0后四0，再加上两个等号扩展为四个字节
