# 数据链路层

标签（空格分隔）： 前端知识体系

---

网络传输的最小单位

* 通过同轴电缆、双绞线电缆、光纤、电磁波等通信媒介传输数据
* 通过中继器、交换机、网桥等中转数据

## MAC地址

介质访问控制地址，用于识别数据链路中互连的节点

### 组成

48比特，一般烧录在网卡上

* 第1位：单播地址（0）/ 多播地址（1）
* 第2位：全局地址（0）/ 本地地址（1）
* 第3~24位：厂商识别码
* 第25~48位：厂商内识别码

## MAC

Medium Access Control，介质访问控制，用于控制数据的发送和接收

### CSMA/CD

带冲突检测的载波监听多路访问

1. 载波信道上没有数据流动时，则任何主机都可以发送数据
2. 检测是否发送了冲突
 a. 没有冲突时，向其他主机广播，其他主机根据MAC地址判断接收数据还是放弃数据
 b. 发生冲突时，放弃发送的数据，随机延时一段时间，重新发送数据

### 令牌环方式

沿着令牌环发送令牌报文

1. 接收到令牌的主机可以发送数据
2. 下一个主机根据MAC地址判断是否是目标主机
 a. 不是目标主机，将数据转给下一个主机
 b. 是目标主机，接收数据，并设置为已接收转给下一个主机
3. 数据回到源主机后被丢弃，令牌传递给下一个主机

### 交换机转发

主机都和交换机的端口连接

* 源主机将数据发送给交换机
* 交换机将源MAC地址和对应的接口记录到转发表中
* 交换机在转发表中查找目标MAC地址的接口
 * 未找到，向其他主机广播，记录目标MAC地址和对应的接口
 * 已找到，通过该接口转发给目标主机

扩展

* VLAN: 交换机按端口区分网段，减少广播数据传播的范围
* 环路检测: 处理环路中数据被循环转发的情况

## 以太网

使用最广的数据链路

### 连接

* 多台终端使用同一根同轴电缆的共享介质型连接方式
* 多台终端与交换机相连的非共享介质型连接方式

### 帧格式

* Preamble: 前导码，7个字节，用于网卡同步
* SFD: Start Frame Delimiter, 帧开始分隔符，1个字节，标志以太网帧的开始
* 以太网首部：14个字节
 * 目的MAC地址：6个字节
 * 源MAC地址：6个字节
 * 上层协议类型：2个字节
* 以太网数据：46 ~ 1500个字节
* FCS：Frame Check Sequence, 帧检验序列，用于检查帧是否损坏

## 无线通信

使用电磁波、红外线、激光等方式传播数据

### 分类

* 无线PAN：蓝牙
* 无线LAN：WiFi
* 无线WAN：移动通信

### IEEE802.11

无线LAN协议，介质访问控制使用CSAM/CA

* 有被盗听或篡改的危险
* 会被其他通信设备干扰

| 标准 | 使用频段 | 最大速率 |
| --- | --- | --- |
| 802.11 | 2.4GHz | 2Mbps |
| 802.11a | 5GHz | 54Mbps |
| 802.11b | 2.4GHz | 11Mbps |
| 802.11g | 2.4GHZ | 54Mbps |
| 802.11n | 2.4GHz/5GHz | 150Mbps |

## PPP

Point-to-Point Protocol，点对点协议

### 连接

* 电话线：ASDL接入
* 光纤：FTTH接入
* 专线
* ATM：信元接入
